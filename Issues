cc583d03-2fbc-4b22-a694-19679af9ace5
'bd1fbfaa-f5fb-4ebd-b75c-564506fc309e'

SELECT V.uuid as visitUuid, V.enddate, V. startdate, V.patientuuid,P.openmrs_id, V.sync, P.gender,P.first_name, P.last_name, P.middle_name, P.date_of_birth,
CASE WHEN PA.person_attribute_type_uuid  != '14d4f066-15f5-102d-96e4-000c29c2a5d7' THEN PA.value END bedNo,
CASE PA.person_attribute_type_uuid WHEN '14d4f066-15f5-102d-96e4-000c29c2a5d7' THEN PA.value END phoneNumber,
 (SELECT uuid FROM tbl_encounter where visituuid = V.uuid and voided IN ('0','false')  AND encounter_type_uuid != 'bd1fbfaa-f5fb-4ebd-b75c-564506fc309e' ORDER BY encounter_time DESC limit 1) as latestEncounterId,
  (SELECT CASE  WHEN U.name LIKE '%Stage1%' THEN 'Stage-1'  WHEN U.name LIKE '%Stage2%' THEN 'Stage-2' ELSE ''  END Stage FROM tbl_encounter E, tbl_uuid_dictionary U   WHERE E.visituuid =V.uuid  and E.voided IN ('0','false')   and U.uuid = E.encounter_type_uuid   ORDER BY U.name DESC LIMIT 1)  as stage FROM tbl_visit  V
  LEFT OUTER JOIN tbl_patient P ON P.uuid = V.patientuuid
  LEFT OUTER JOIN tbl_visit_attribute VA ON VA.visit_uuid = V.uuid
  LEFT OUTER JOIN tbl_patient_attribute PA ON PA.patientuuid = P.uuid
  AND PA.person_attribute_type_uuid = (SELECT uuid FROM tbl_patient_attribute_master  WHERE name = 'Bed Number')  WHERE V.uuid
  NOT IN (Select visituuid FROM tbl_encounter WHERE  encounter_type_uuid ='bd1fbfaa-f5fb-4ebd-b75c-564506fc309e' ) AND V.voided IN ('0','false')
  AND VA.value = 'c1efa41d-3c43-45d6-9e3a-472823b61a59'  GROUP BY V.uuid  ORDER BY V.startdate DESC  LIMIT 120

POST https://ezazi.intelehealth.org/EMR-Middleware/webapi/push/pushdata
16:15:10.240  I  Content-Type: application/json; charset=UTF-8
16:15:10.240  D  Push ended
16:15:10.240  I  Content-Length: 3069
16:15:10.240  I  Accept: application/json
16:15:10.241  I  Authorization: Basic bWl0aHVubnVyc2U6TnVyc2VAMzIx
16:15:10.241  I  {"encounters":[{"encounterDatetime":"2023-08-11T16:02:01.130+0530","encounterProviders":[{"encounterRole":"73bbb069-9781-4afc-a9d1-54b6b2270e04","provider":"c1efa41d-3c43-45d6-9e3a-472823b61a59"}],"encounterType":"736ec5de-d780-4e34-a1cb-2de28702b0de","location":"eb374eaf-430e-465e-81df-fe94c2c515be","obs":[{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"fcf1f860-889a-408b-9fd2-cd4605df47a5","value":"Self discharge against Medical Advice"}],"patient":"ee9191c0-c53c-445b-9434-f074e1268c5e","uuid":"3704c5b0-1c94-4cd2-8b45-08eb7f3bb81f","visit":"ed972381-1823-4c65-9825-39f2dca43b11","voided":0},{"encounterDatetime":"2023-08-11T16:02:01.410+0530","encounterProviders":[{"encounterRole":"73bbb069-9781-4afc-a9d1-54b6b2270e04","provider":"c1efa41d-3c43-45d6-9e3a-472823b61a59"}],"encounterType":"ae69e6f0-7bf4-4981-8742-c59ad0040630","location":"eb374eaf-430e-465e-81df-fe94c2c515be","obs":[{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"fcf1f860-889a-408b-9fd2-cd4605df47a5","value":"Self discharge against Medical Advice"}],"patient":"341117f1-0f7c-46a3-9c24-017a728316e1","uuid":"d27774f6-1f42-42b5-958c-8b31b604a153","visit":"8b5626ca-c3b7-4188-9ba8-36d217f26760","voided":0},{"encounterDatetime":"2023-08-11T16:02:01.463+0530","encounterProviders":[{"encounterRole":"73bbb069-9781-4afc-a9d1-54b6b2270e04","provider":"c1efa41d-3c43-45d6-9e3a-472823b61a59"}],"encounterType":"a367b296-601f-474b-afa4-c6989ef43f77","location":"eb374eaf-430e-465e-81df-fe94c2c515be","obs":[{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"fcf1f860-889a-408b-9fd2-cd4605df47a5","value":"Self discharge against Medical Advice"}],"patient":"a4a56c98-2b73-42c6-ba96-d8d0c6a83bce","uuid":"83abe960-2429-4858-be97-28fd88d22f12","visit":"cc583d03-2fbc-4b22-a694-19679af9ace5","voided":0},{"encounterDatetime":"2023-08-11T16:13:06.107+0530","encounterProviders":[{"encounterRole":"73bbb069-9781-4afc-a9d1-54b6b2270e04","provider":"c1efa41d-3c43-45d6-9e3a-472823b61a59"}],"encounterType":"bd1fbfaa-f5fb-4ebd-b75c-564506fc309e","location":"eb374eaf-430e-465e-81df-fe94c2c515be","obs":[{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"fcf1f860-889a-408b-9fd2-cd4605df47a5","value":"Self discharge against Medical Advice"}],"patient":"ee9191c0-c53c-445b-9434-f074e1268c5e","uuid":"a951a6fa-e91b-4b1c-8e3e-98ec131cef95","visit":"ed972381-1823-4c65-9825-39f2dca43b11","voided":0}],"patients":[],"persons":[],"visits":[{"attributes":[{"attributeType":"3f296939-c6d3-4d2e-b8ca-d7f4bfd42c2d","uuid":"f69206cf-065e-469d-ae3a-735380051ed4","value":"General Physician"},{"attributeType":"a0378be4-d9c6-4cb2-bbf5-777e27a32efc","uuid":"637afede-3f37-4f94-936a-8b836728bdc1","value":"c1efa41d-3c43-45d6-9e3a-472823b61a59"}],"location":"eb374eaf-430e-465e-81df-fe94c2c515be","patient":"ee9191c0-c53c-445b-9434-f074e1268c5e","startDatetime":"2023-08-10T12:13:50.000+0530","stopDatetime":"2023-08-11T16:15:06.117+0530","uuid":"ed972381-1823-4c65-9825-39f2dca43b11","visitType":"a86ac96e-2e07-47a7-8e72-8216a1a75bfd"}]}
16:15:10.241  I  --> END POST (3069-byte body)
16:15:11.034  I  <-- 200 https://ezazi.intelehealth.org/EMR-Middleware/webapi/push/pushdata (792ms)
16:15:11.034  I  Server: nginx/1.14.0 (Ubuntu)
16:15:11.034  I  Date: Fri, 11 Aug 2023 10:45:11 GMT
16:15:11.035  I  Content-Type: application/json
16:15:11.035  I  Content-Length: 452
16:15:11.035  I  Connection: keep-alive
16:15:11.035  I  Access-Control-Allow-Origin: *
16:15:11.035  I  Access-Control-Expose-Headers: Cache-Control,Access-Control-Allow-Origin,Access-Control-Allow-Credentials
16:15:11.035  I  {"status":"OK","data":{"personList":[],"patientlist":[],"visitlist":[{"uuid":"ed972381-1823-4c65-9825-39f2dca43b11","syncd":true,"voided":0}],"encounterlist":[{"uuid":"3704c5b0-1c94-4cd2-8b45-08eb7f3bb81f","syncd":true,"voided":0},{"uuid":"d27774f6-1f42-42b5-958c-8b31b604a153","syncd":false,"voided":0},{"uuid":"83abe960-2429-4858-be97-28fd88d22f12","syncd":false,"voided":0},{"uuid":"a951a6fa-e91b-4b1c-8e3e-98ec131cef95","syncd":false,"voided":0}]}}


{"status":"OK","data":{"pullexecutedtime":"2023-08-11 17:09:59","patientlist":[{"uuid":"8e581e3e-4594-4910-a731-a7d536651d05","openmrs_id":"12KAY-0","firstname":"Test chat","lastname":"Zee delivered","dateofbirth":"Aug 11, 2013 12:00:00 AM","cityvillage":"Charkhi Dadri:Sadd","stateprovince":"Haryana","country":"India","gender":"F","dead":0,"syncd":true,"voided":0,"creatoruuid":"7766824c-b463-4f40-b7bb-128219c3e0f2"}],"patientAttributeTypeListMaster":[],"patientAttributesList":[{"uuid":"844d303a-1783-4d4e-a862-3bee03a25a4f","value":"0,0","person_attribute_type_uuid":"5a889d96-0c84-4a04-88dc-59a6e37db2d3","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"bed265de-27cb-4ef1-8680-a12bbe754296","value":"Spontaneous","person_attribute_type_uuid":"f4af0ef3-579c-448a-8157-750283409122","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"a04a0f2c-7bd3-440e-9b14-eb24d501ae55","value":"11/08/2023 05:05 PM","person_attribute_type_uuid":"1c718819-345c-4368-aad6-d69b4c267db7","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"5f45fedf-5bdd-423f-be40-2fd5d23647ea","value":"11/08/2023 05:05 PM","person_attribute_type_uuid":"1b2f34f7-2bf8-4ef7-9736-f5b858afc160","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"f86b431a-1ae9-4e74-96dd-60e96e9b6de3","value":"None","person_attribute_type_uuid":"ecdaadb6-14a0-4ed9-b5b7-cfed87b44b87","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"1f3b1707-2d72-4ce9-8594-7bda747f30ff","value":"Hospital","person_attribute_type_uuid":"99d5b4ef-db5a-4ae4-a5e2-2bf1ea0a251e","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"87c8016d-40c6-4e99-961d-da79d0adc0f4","value":"2023-08-11T17:05:53.003+0530","person_attribute_type_uuid":"9b4b0eee-bffc-4078-9313-2ad22f9f947e","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"b01da9b0-9b09-48fc-9004-a9a39307abcd","value":"11/08/2023","person_attribute_type_uuid":"5be1a7cc-4da4-4e4a-9758-ee8378d27699","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"48e4c0a0-75e7-4b06-8f34-c925f61f765f","value":"05:05 PM","person_attribute_type_uuid":"6ca65d16-8f75-4ca3-9351-8a3519094a62","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"6de9e7c6-ce81-4094-b506-57c4627e5b97","value":"30cd7a4f-421e-45c1-b64f-392705fd4eae@#@Webrtcd Doctor","person_attribute_type_uuid":"425804e5-d3d9-4234-b729-1ee77f894843","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"4b64ee11-6da6-49b5-aebe-fbaadd1f1799","value":"314ec954-4363-4674-9dc6-8527030e761d@#@zeeshan doctor","person_attribute_type_uuid":"51c38c3f-48ca-452d-8272-697bcaca33ae","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"8294519a-65a4-47a4-8caf-435d704d6af8","value":"In/Ha/Ch/27927018","person_attribute_type_uuid":"d37dee12-e575-42bd-995e-0a62759643b8","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"},{"uuid":"92a3cc0a-d6a0-412a-9750-d77e767f39d3","value":"NA","person_attribute_type_uuid":"d0786817-68d9-4226-b311-3de68d534b9e","patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05"}],"visitlist":[{"patientuuid":"8e581e3e-4594-4910-a731-a7d536651d05","uuid":"8f6fcf4f-c31c-4b0c-a9dc-5780f18ce148","visit_type_uuid":"a86ac96e-2e07-47a7-8e72-8216a1a75bfd","startdate":"Aug 11, 2023 5:06:03 PM","locationuuid":"eb374eaf-430e-465e-81df-fe94c2c515be","creator_uuid":"7766824c-b463-4f40-b7bb-128219c3e0f2","syncd":true,"voided":0}],"encounterlist":[{"uuid":"91eed248-983e-4d03-9a27-5b79aec671f5","visituuid":"faddf5b4-90b1-4a80-a587-d1ca85aaf7bc","encounter_type_uuid":"0f4249c5-aa59-4d16-8b94-9b6ecf8dcbf7","provider_uuid":"6c3d7c06-bb8d-4742-865a-c56be1044225","syncd":true,"voided":0,"encounter_time":"2023-08-11 17:02:05"},{"uuid":"a9574d51-7a96-41fa-a8a2-3e2e0a95e03a","visituuid":"8f6fcf4f-c31c-4b0c-a9dc-5780f18ce148","encounter_type_uuid":"ee560d18-34a1-4ad8-87c8-98aed99c663d","provider_uuid":"6c3d7c06-bb8d-4742-865a-c56be1044225","syncd":true,"voided":0,"encounter_time":"2023-08-11 17:06:03"}],"obslist":[{"uuid":"c57349
  1f-0da5-4c72-a541-e62cb27b816c","encounteruuid":"a9574d51-7a96-41fa-a8a2-3e2e0a95e03a","conceptuuid":"5090AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","value":"Y","creator":386,"obsServerModifiedDate":"2023-08-11 17:07:21","voided":0,"comment":"G"}],"locationlist":[],"providerlist":[],"providerAttributeTypeList":[],"providerAttributeList":[],"visitAttributeTypeList":[],"visitAttributeList":[{"uuid":"09225c16-9a97-455c-9803-545af40f9134","visit_uuid":"8f6fcf4f-c31c-4b0c-a9dc-5780f18ce148","value":"General Physician","visit_attribute_type_uuid":"3f296939-c6d3-4d2e-b8ca-d7f4bfd42c2d","voided":0},{"uuid":"8565b293-d10a-42a9-9180-196497084b9b","visit_uuid":"8f6fcf4f-c31c-4b0c-a9dc-5780f18ce148","value":"6c3d7c06-bb8d-4742-865a-c56be1044225","visit_attribute_type_uuid":"a0378be4-d9c6-4cb2-bbf5-777e27a32efc","voided":0}]}}


{"encounters":[{"encounterDatetime":"2023-08-09T12:35:34.786+0530","encounterProviders":[{"encounterRole":"73bbb069-9781-4afc-a9d1-54b6b2270e04","provider":"c1efa41d-3c43-45d6-9e3a-472823b61a59"}],"encounterType":"bd1fbfaa-f5fb-4ebd-b75c-564506fc309e","location":"eb374eaf-430e-465e-81df-fe94c2c515be","obs":[{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"86555295-d290-4b49-a7e5-fb6d584aface","value":"Self discharge against Medical Advice"},{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"c69bace8-5a14-424e-bfe0-6b556f5da556","value":"Self discharge against Medical Advice"}],"patient":"a4a56c98-2b73-42c6-ba96-d8d0c6a83bce","uuid":"9ac8724a-0059-469f-9eea-b07a51b349d9","visit":"cc583d03-2fbc-4b22-a694-19679af9ace5","voided":0},{"encounterDatetime":"2023-08-10T12:57:57.316+0530","encounterProviders":[{"encounterRole":"73bbb069-9781-4afc-a9d1-54b6b2270e04","provider":"c1efa41d-3c43-45d6-9e3a-472823b61a59"}],"encounterType":"bd1fbfaa-f5fb-4ebd-b75c-564506fc309e","location":"eb374eaf-430e-465e-81df-fe94c2c515be","obs":[{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"86555295-d290-4b49-a7e5-fb6d584aface","value":"Self discharge against Medical Advice"},{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"c69bace8-5a14-424e-bfe0-6b556f5da556","value":"Self discharge against Medical Advice"}],"patient":"341117f1-0f7c-46a3-9c24-017a728316e1","uuid":"291bc813-2e17-4cc6-878b-fcba8bc4e67d","visit":"8b5626ca-c3b7-4188-9ba8-36d217f26760","voided":0},{"encounterDatetime":"2023-08-11T12:52:02.659+0530","encounterProviders":[{"encounterRole":"73bbb069-9781-4afc-a9d1-54b6b2270e04","provider":"c1efa41d-3c43-45d6-9e3a-472823b61a59"}],"encounterType":"bd1fbfaa-f5fb-4ebd-b75c-564506fc309e","location":"eb374eaf-430e-465e-81df-fe94c2c515be","obs":[{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"86555295-d290-4b49-a7e5-fb6d584aface","value":"Self discharge against Medical Advice"},{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"c69bace8-5a14-424e-bfe0-6b556f5da556","value":"Self discharge against Medical Advice"}],"patient":"ee9191c0-c53c-445b-9434-f074e1268c5e","uuid":"8cedcac8-8fe8-4d1e-9868-25793e99e6ed","visit":"ed972381-1823-4c65-9825-39f2dca43b11","voided":0},{"encounterDatetime":"2023-08-11T12:55:13.926+0530","encounterProviders":[{"encounterRole":"73bbb069-9781-4afc-a9d1-54b6b2270e04","provider":"c1efa41d-3c43-45d6-9e3a-472823b61a59"}],"encounterType":"bd1fbfaa-f5fb-4ebd-b75c-564506fc309e","location":"eb374eaf-430e-465e-81df-fe94c2c515be","obs":[{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"86555295-d290-4b49-a7e5-fb6d584aface","value":"Self discharge against Medical Advice"},{"comment":"","concept":"9414cc17-1f97-4a27-8066-17591c11e513","uuid":"c69bace8-5a14-424e-bfe0-6b556f5da556","value":"Self discharge against Medical Advice"}],"patient":"1575a682-ce11-4686-9770-90132ad1f254","uuid":"1e5332e1-b394-48da-be89-cc4318290a61","visit":"c853c1e3-60ef-41b4-82ba-8af549238228","voided":0}],"patients":[{"identifiers":[{"identifierType":"05a29f94-c0ed-11e2-94be-8c13b969e334","location":"eb374eaf-430e-465e-81df-fe94c2c515be","preferred":true}],"person":"1f25067f-3b55-4514-98de-d3827aafff44"}],"persons":[{"addresses":[{"address1":"","address2":"","cityVillage":"Anantapur:Qwertty","country":"India","postalCode":"","stateProvince":"Andhra Pradesh"}],"attributes":[{"attributeType":"5be1a7cc-4da4-4e4a-9758-ee8378d27699","value":"11/08/2023"},{"attributeType":"6ca65d16-8f75-4ca3-9351-8a3519094a62","value":"06:21 AM"},{"attributeType":"5a889d96-0c84-4a04-88dc-59a6e37db2d3","value":"0,0"},{"attributeType":"f4af0ef3-579c-448a-8157-750283409122","value":"Spontaneous"},{"attributeType":"1c718819-345c-4368-aad6-d69b4c267db7","value":"11/08/2023 09:45 AM"},{"attributeType":"1b2f34f7-2bf8-4ef7-9736-f5b858afc160","value":"11/08/2023 09:15 PM"},{"attributeType":"ecdaadb6-14a0-4ed9-b5b7-cfed87b44b87","value":"Previo
   us LSCS (History of Cesarean Section), Young Primigravida (Age less than 20 Years), Elderly Gravida (Age more that 35 Years), Grand Multipara (\u003e 4 Livebirths), History of Abortions (Bad Obstetric History), History of Stillbirth (Bad Obstetric History), History of Neonatal Deaths (Bad Obstetric History), History of Newborn with Congenital Defect (Bad Obstetric History), History of Obstructed Labour (Bad Obstetric History), History of Premature Birth (Bad Obstetric History), History of Newborn with Low Birth Weight (\u003c 2500 g), History of Newborn with Excess Birth Weight (\u003e 4500 g), History of Treatment for Infertility"},{"attributeType":"99d5b4ef-db5a-4ae4-a5e2-2bf1ea0a251e","value":"Maternity"},{"attributeType":"425804e5-d3d9-4234-b729-1ee77f894843","value":"30cd7a4f-421e-45c1-b64f-392705fd4eae@#@Webrtcd Doctor"},{"attributeType":"51c38c3f-48ca-452d-8272-697bcaca33ae","value":"314ec954-4363-4674-9dc6-8527030e761d@#@zeeshan doctor"},{"attributeType":"d37dee12-e575-42bd-995e-0a62759643b8","value":"In/An/An/32435656"},{"attributeType":"d0786817-68d9-4226-b311-3de68d534b9e","value":"NA"},{"attributeType":"10720d1a-1471-431b-be28-285d64767093","value":""},{"attributeType":"9b4b0eee-bffc-4078-9313-2ad22f9f947e","value":"2023-08-11T13:24:35.596+0530"}],"birthdate":"2013-08-11","gender":"F","names":[{"familyName":"Test","givenName":"LongRisk","middleName":""}],"uuid":"1f25067f-3b55-4514-98de-d3827aafff44"}],"visits":[]}


SELECT P.uuid, P.openmrs_id, P.first_name, P.last_name, P.middle_name, P.date_of_birth, V.uuid as visitId,
CASE WHEN P.middle_name IS NULL THEN P.first_name || ' ' || P.last_name ELSE P.first_name || ' ' || P.middle_name || ' ' || P.last_name END fullName,
(SELECT CASE WHEN O.value LIKE '%discharge%'  THEN 'DAMA' WHEN O.value LIKE '%Refer%'  THEN 'RTOH' WHEN O.conceptuuid = '893b3d20-171b-4023-a6f5-3d3bdf81a094' THEN 'Out of Time' ELSE O.value END outcome
FROM tbl_encounter E, tbl_obs O WHERE E.visituuid =V.uuid  and E.voided = '0' and O.encounteruuid = E.uuid AND O.conceptuuid IN
 ('23601d71-50e6-483f-968d-aeef3031346d', '9414cc17-1f97-4a27-8066-17591c11e513','893b3d20-171b-4023-a6f5-3d3bdf81a094') LIMIT 1) as birthStatus,
 (SELECT CASE WHEN U.name LIKE '%Stage1%'  THEN 'Stage1' WHEN U.name LIKE '%Stage2%'  THEN 'Stage2' ELSE U.name END Stage FROM tbl_encounter E, tbl_uuid_dictionary U
 WHERE E.visituuid =V.uuid  and E.voided = '0'  and U.uuid = E.encounter_type_uuid  ORDER BY U.name DESC LIMIT 1)  as stage,
 CASE PA.person_attribute_type_uuid WHEN '14d4f066-15f5-102d-96e4-000c29c2a5d7' THEN PA.value END phoneNumber,
 CASE WHEN PA.person_attribute_type_uuid  != '14d4f066-15f5-102d-96e4-000c29c2a5d7' THEN PA.value END bedNo  FROM tbl_patient P
 LEFT OUTER JOIN tbl_visit V ON P.uuid = V.patientuuid
 LEFT OUTER JOIN tbl_patient_attribute PA ON PA.patientuuid = P.uuid AND PA.person_attribute_type_uuid IN
 ((SELECT uuid FROM tbl_patient_attribute_master WHERE name = 'Bed Number'), '14d4f066-15f5-102d-96e4-000c29c2a5d7')
 WHERE  LOWER(fullName) LIKE LOWER('%dama te%') OR LOWER(P.openmrs_id) LIKE LOWER('%dama te%') OR LOWER(birthStatus) LIKE LOWER('%dama te%')   GROUP BY P.uuid  ORDER BY P.first_name ASC

Target
- Chat issues - DONE
- Scrolling issue - IN PROGRESS
- Privacy issue - IN PROGRESS

- In between video calls when I minimize the app and reopen that time web app side video screen is showing a blank.
- when the web browser is minimized and HW call from the mobile app that time unable to see the notification on the app browser when I opened the web app page then I can see the call notification
- The phone ringtone is ringing for 30 sec only then it is unable to repeat when I call from the web app.

Longest text visit = BackEvent Test - 58238b29-20e6-4033-a512-de8cdd88096e,
EndShift Test = 2797e639-3592-4284-a0f8-6bae717bf4c0
Out of time with longest text not visible to another nurse

83f4425e-b28f-4266-8177-543ef6148000

After shifting the patient to another nurse

- if I logout assigner nurse then on web app side displayed the toast HW is offline,
  why this happen? possible case
  - We are checking the user online/offline from existing array of socket, in this case may be
    we are checking the old nurse provider id which has shifted the patient and logout, that's why
    I think we got that nurse offline, where we need to check the assignee nurse provider id which is
    latest updated in Visit Attributes table for shifted patient.

- If after shifted the nurse didn't logout and continue, in this case if doctor call for the shifted patient
  call coming on assigner(creator) device, it should not be happen, after patient shifted, call should be going to
  assignee nurse.
  - Here I found that we should apply same thing as above point for latest updated visit attributes table's
  provider base



onNext: setChwnamewebrtcn
16:59:27.003  E  onNext: setCreatorID 3a40979c-a02e-409a-a552-21e6334d0d68
16:59:27.003  E  onNext: setSessionID C17890151AA163CFAA7C518C70AE585C
16:59:27.003  E  onNext: setProviderID 0c812a8b-a65e-4891-9a5c-ebb9d401344b

Search
- In home add bed no - done
- Duplication entry found when search nurse from end shift - done
- Nurse selection dialog cancel and okay button on keyboard on - pending
- In timeline edit button should be hide if different provider found - done
- Add patient -> Risk factor not searching properly - done
- Primary doctor and secondary doctor wrong value - done
- Remove search from observation - done

createEncountersToDB: getEncounterTypeUuid : 558cc1b8-c352-4b27-9ec2-131fc19c26f0

WebRtc
1 - Call initiate from doctor to health second time getting close with message hw end the call.
2 - Second time call connection issue for HW -> doctor
1	61aa72ba-40dd-41e8-b860-7431447c2e7d
12K0U-6
Shift1 Test
Selected patients : 1
Visit Uuid =>c89010d6-ecd2-4134-93ac-ae5783b63185
assignNurseToPatient: bab36595-4d50-4879-ac59-c84e6a9b6722
22:54:39.301  E  onNext: setChwname = nurseuat
22:54:39.301  E  onNext: setCreatorID = 13e5798f-7d80-4ff9-83d3-a30fac4ff240
22:54:39.301  E  onNext: setSessionID = 21B391891C4DED5060FEC4655D9FA798
22:54:39.301  E  onNext: setProviderID = 9d3a18d5-44c6-44c0-bd26-784f7d55c3bc

onNext: setChwname webrtcn
17:34:49.791  E  onNext: setCreatorID 3a40979c-a02e-409a-a552-21e6334d0d68
17:34:49.792  E  onNext: setSessionID 22C54533509BB9F6C496286F2B7E564C
17:34:49.792  E  onNext: setProviderID 0c812a8b-a65e-4891-9a5c-ebb9d401344b

https://ezazi.intelehealth.org:3000/api/getToken?
name=doctorUuid
&roomId=patientUuid
&nurseName=nurseUuid

socket.emitEvent("create_or_join_hw", {
      patientId: this.data.patientId,
      connectToDrId: this.data.connectToDrId,
      visitId: "test-visit-uuid",
      nurseName: 'Zee Test Nurse',
      patientName: "Test Chat Patient",
      patientPersonUuid: 'testuuid',
      patientOpenMrsId: 'TESTID-12',
      token: "webapp side from getToken API"
    }) (edited)

{
  "data": {
    "encounterlist": [
      {
        "syncd": false,
        "uuid": "c1841779-235f-4286-894e-a7c218b14d9c",
        "voided": 0
      },
      {
        "syncd": false,
        "uuid": "5ef0c3be-dcee-4a6a-927b-ec2acf8fdb69",
        "voided": 0
      },
      {
        "syncd": false,
        "uuid": "d615f3ae-4894-4f33-8433-996ba9db6905",
        "voided": 0
      },
      {
        "syncd": false,
        "uuid": "48f7b180-5917-4777-a9f1-12b9952fde32",
        "voided": 0
      },
      {
        "syncd": false,
        "uuid": "e2af2e90-b922-46c3-acf7-1f1df96d3635",
        "voided": 0
      },
      {
        "syncd": true,
        "uuid": "eba1e5b5-7da6-409e-a4a6-28baa7d922ed",
        "voided": 0
      },
      {
        "syncd": true,
        "uuid": "80904d47-909b-4a39-8f5a-05d02d54549d",
        "voided": 0
      },
      {
        "syncd": true,
        "uuid": "39da4bd1-e199-4c5f-829c-d93205904b6e",
        "voided": 0
      },
      {
        "syncd": true,
        "uuid": "b843d86b-101a-4d89-a4dd-8f7085338944",
        "voided": 0
      },
      {
        "syncd": false,
        "uuid": "479471fb-5a94-4d33-a1c7-7e56c0c716bb",
        "voided": 0
      }
    ],
    "patientlist": [
      
    ],
    "personList": [
      
    ],
    "visitlist": [
      {
        "syncd": true,
        "uuid": "f6f9c31b-d8d2-4ab5-bc43-c6fa8a5ec98f"
      },
      {
        "syncd": true,
        "uuid": "c7ecbfd1-0564-4048-9a82-09a17217621f"
      },
      {
        "syncd": true,
        "uuid": "f343fe03-cc8e-4a0e-9618-5d76bd05bfc8"
      },
      {
        "syncd": true,
        "uuid": "843b54ae-31d1-45f0-a182-0d486b9f7f76"
      },
      {
        "syncd": true,
        "uuid": "a95d9b0d-0825-4165-8ec6-b414c85063db"
      }
    ]
  },
  "status": "OK"
}

Socket Url :3004?userId=5a700f00-eca8-4fe2-bbbd-a2d4e5c3622a&name=5a700f00-eca8-4fe2-bbbd-a2d4e5c3622a
21:03:39.258  D  Shutting down VM
21:03:39.259  E  FATAL EXCEPTION: main
                 Process: org.intelehealth.ezazi, PID: 15584
                 java.lang.RuntimeException: Unable to start activity ComponentInfo{org.intelehealth.ezazi/org.intelehealth.ezazi.ui.rtc.activity.EzaziVideoCallActivity}: java.net.URISyntaxException: Expected scheme name at index 0: :3004?userId=5a700f00-eca8-4fe2-bbbd-a2d4e5c3622a&name=5a700f00-eca8-4fe2-bbbd-a2d4e5c3622a
                 	at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3645)
                 	at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3782)
                 	at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:101)
                 	at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)
                 	at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)
                 	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307)
                 	at android.os.Handler.dispatchMessage(Handler.java:106)
                 	at android.os.Looper.loopOnce(Looper.java:201)
                 	at android.os.Looper.loop(Looper.java:288)
                 	at android.app.ActivityThread.main(ActivityThread.java:7872)
                 	at java.lang.reflect.Method.invoke(Native Method)
                 	at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)
                 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)
                 Caused by: java.net.URISyntaxException: Expected scheme name at index 0: :3004?userId=5a700f00-eca8-4fe2-bbbd-a2d4e5c3622a&name=5a700f00-eca8-4fe2-bbbd-a2d4e5c3622a
                 	at java.net.URI$Parser.fail(URI.java:2893)
                 	at java.net.URI$Parser.failExpecting(URI.java:2899)
                 	at java.net.URI$Parser.parse(URI.java:3091)
                 	at java.net.URI.<init>(URI.java:584)
                 	at io.socket.client.IO.socket(IO.java:42)
                 	at io.socket.client.IO.socket(IO.java:38)
                 	at org.intelehealth.klivekit.socket.SocketManager.connect(SocketManager.kt:25)
                 	at org.intelehealth.klivekit.ui.viewmodel.SocketViewModel.connect(SocketViewModel.kt:105)
                 	at org.intelehealth.klivekit.ui.activity.CoreVideoCallActivity.observerSocketEvent(CoreVideoCallActivity.kt:164)
                 	at org.intelehealth.klivekit.ui.activity.CoreVideoCallActivity.onCreate(CoreVideoCallActivity.kt:83)
                 	at org.intelehealth.ezazi.ui.rtc.activity.EzaziVideoCallActivity.onCreate(EzaziVideoCallActivity.java:38)
                 	at android.app.Activity.performCreate(Activity.java:8305)
                 	at android.app.Activity.performCreate(Activity.java:8284)
                 	at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1417)
                 	at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3626)
                 	at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3782) 
                 	at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:101) 
                 	at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) 
                 	at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) 
                 	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307) 
                 	at android.os.Handler.dispatchMessage(Handler.java:106) 
                 	at android.os.Looper.loopOnce(Looper.java:201) 
                 	at android.os.Looper.loop(Looper.java:288) 
                 	at android.app.ActivityThread.main(ActivityThread.java:7872) 
                 	at java.lang.reflect.Method.invoke(Native Method) 
                 	at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548) 
                 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936) 